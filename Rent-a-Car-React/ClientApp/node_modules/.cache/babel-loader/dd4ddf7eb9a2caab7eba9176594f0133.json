{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bluec\\\\Desktop\\\\Nowy folder (3)\\\\Rent-a-Car-React\\\\ClientApp\\\\src\\\\components\\\\api-authorization\\\\LoginMenu.js\";\nimport React, { Component, Fragment } from 'react';\nimport { NavItem, NavLink } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport authService from './AuthorizeService';\nimport { ApplicationPaths } from './ApiAuthorizationConstants';\nexport class LoginMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthenticated: false,\n      userName: null,\n      accountType: null\n    };\n  }\n\n  componentDidMount() {\n    this._subscription = authService.subscribe(() => this.populateState());\n    this.populateState();\n  }\n\n  componentWillUnmount() {\n    authService.unsubscribe(this._subscription);\n  }\n\n  async populateState() {\n    const [isAuthenticated, user, account] = await Promise.all([authService.isAuthenticated(), authService.getUser(), authService.getAccountType()]);\n    this.setState({\n      isAuthenticated,\n      userName: user && user.name,\n      accountType: account\n    });\n  }\n\n  render() {\n    const {\n      isAuthenticated,\n      userName\n    } = this.state;\n\n    if (!isAuthenticated) {\n      const registerPath = `${ApplicationPaths.Register}`;\n      const loginPath = `${ApplicationPaths.Login}`;\n      return this.anonymousView(registerPath, loginPath);\n    } else {\n      const profilePath = `${ApplicationPaths.Profile}`;\n      const logoutPath = {\n        pathname: `${ApplicationPaths.LogOut}`,\n        state: {\n          local: true\n        }\n      };\n      return this.authenticatedView(userName, profilePath, logoutPath);\n    }\n  }\n\n  authenticatedView(userName, profilePath, logoutPath) {\n    if (!!this.state.accountType && this.state.accountType === 1) {\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        tag: Link,\n        className: \"text-dark\",\n        to: \"/Profil/Worker\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 21\n        }\n      }, \"Profil Pracownika\")), /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        tag: Link,\n        className: \"text-dark\",\n        to: profilePath,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }\n      }, \"Witaj \", userName)), /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        tag: Link,\n        className: \"text-dark\",\n        to: logoutPath,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }\n      }, \"Wyloguj\")));\n    } else {\n      return /*#__PURE__*/React.createElement(Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        tag: Link,\n        className: \"text-dark\",\n        to: \"/Profil/Customer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }\n      }, \"Profil Klienta\")), /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        tag: Link,\n        className: \"text-dark\",\n        to: profilePath,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }\n      }, \"Witaj \", userName)), /*#__PURE__*/React.createElement(NavItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        tag: Link,\n        className: \"text-dark\",\n        to: logoutPath,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      }, \"Wyloguj\")));\n    }\n  }\n\n  anonymousView(registerPath, loginPath) {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(NavItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      tag: Link,\n      className: \"text-dark\",\n      to: registerPath,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, \"Zarejestruj sie\")), /*#__PURE__*/React.createElement(NavItem, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(NavLink, {\n      tag: Link,\n      className: \"text-primary\",\n      to: loginPath,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, \"Zaloguj\")));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/bluec/Desktop/Nowy folder (3)/Rent-a-Car-React/ClientApp/src/components/api-authorization/LoginMenu.js"],"names":["React","Component","Fragment","NavItem","NavLink","Link","authService","ApplicationPaths","LoginMenu","constructor","props","state","isAuthenticated","userName","accountType","componentDidMount","_subscription","subscribe","populateState","componentWillUnmount","unsubscribe","user","account","Promise","all","getUser","getAccountType","setState","name","render","registerPath","Register","loginPath","Login","anonymousView","profilePath","Profile","logoutPath","pathname","LogOut","local","authenticatedView"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,YAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;AACA,SAASC,gBAAT,QAAiC,6BAAjC;AAEA,OAAO,MAAMC,SAAN,SAAwBP,SAAxB,CAAkC;AACrCQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,KAAL,GAAa;AACTC,MAAAA,eAAe,EAAE,KADR;AAETC,MAAAA,QAAQ,EAAE,IAFD;AAGTC,MAAAA,WAAW,EAAE;AAHJ,KAAb;AAKH;;AAEDC,EAAAA,iBAAiB,GAAG;AAChB,SAAKC,aAAL,GAAqBV,WAAW,CAACW,SAAZ,CAAsB,MAAM,KAAKC,aAAL,EAA5B,CAArB;AACA,SAAKA,aAAL;AACH;;AAEDC,EAAAA,oBAAoB,GAAG;AACnBb,IAAAA,WAAW,CAACc,WAAZ,CAAwB,KAAKJ,aAA7B;AACH;;AAED,QAAME,aAAN,GAAsB;AAClB,UAAM,CAACN,eAAD,EAAkBS,IAAlB,EAAwBC,OAAxB,IAAmC,MAAMC,OAAO,CAACC,GAAR,CAAY,CAAClB,WAAW,CAACM,eAAZ,EAAD,EAAgCN,WAAW,CAACmB,OAAZ,EAAhC,EAAuDnB,WAAW,CAACoB,cAAZ,EAAvD,CAAZ,CAA/C;AACA,SAAKC,QAAL,CAAc;AACVf,MAAAA,eADU;AAEVC,MAAAA,QAAQ,EAAEQ,IAAI,IAAIA,IAAI,CAACO,IAFb;AAGVd,MAAAA,WAAW,EAAEQ;AAHH,KAAd;AAKH;;AAEDO,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEjB,MAAAA,eAAF;AAAmBC,MAAAA;AAAnB,QAAgC,KAAKF,KAA3C;;AACA,QAAI,CAACC,eAAL,EAAsB;AAClB,YAAMkB,YAAY,GAAI,GAAEvB,gBAAgB,CAACwB,QAAS,EAAlD;AACA,YAAMC,SAAS,GAAI,GAAEzB,gBAAgB,CAAC0B,KAAM,EAA5C;AACA,aAAO,KAAKC,aAAL,CAAmBJ,YAAnB,EAAiCE,SAAjC,CAAP;AACH,KAJD,MAIO;AACH,YAAMG,WAAW,GAAI,GAAE5B,gBAAgB,CAAC6B,OAAQ,EAAhD;AACA,YAAMC,UAAU,GAAG;AAAEC,QAAAA,QAAQ,EAAG,GAAE/B,gBAAgB,CAACgC,MAAO,EAAvC;AAA0C5B,QAAAA,KAAK,EAAE;AAAE6B,UAAAA,KAAK,EAAE;AAAT;AAAjD,OAAnB;AACA,aAAO,KAAKC,iBAAL,CAAuB5B,QAAvB,EAAiCsB,WAAjC,EAA8CE,UAA9C,CAAP;AACH;AACJ;;AAEDI,EAAAA,iBAAiB,CAAC5B,QAAD,EAAWsB,WAAX,EAAwBE,UAAxB,EAAoC;AACjD,QAAI,CAAC,CAAC,KAAK1B,KAAL,CAAWG,WAAb,IAA4B,KAAKH,KAAL,CAAWG,WAAX,KAA2B,CAA3D,EAA8D;AAC1D,0BAAQ,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAET,IAAd;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAA0C,QAAA,EAAE,EAAC,gBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,CADI,eAIJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAEA,IAAd;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAA0C,QAAA,EAAE,EAAE8B,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkEtB,QAAlE,CADJ,CAJI,eAOJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAER,IAAd;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAA0C,QAAA,EAAE,EAAEgC,UAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CAPI,CAAR;AAWH,KAZD,MAYO;AACH,0BAAQ,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAEhC,IAAd;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAA0C,QAAA,EAAE,EAAC,kBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,CADI,eAIJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAEA,IAAd;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAA0C,QAAA,EAAE,EAAE8B,WAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkEtB,QAAlE,CADJ,CAJI,eAOJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAER,IAAd;AAAoB,QAAA,SAAS,EAAC,WAA9B;AAA0C,QAAA,EAAE,EAAEgC,UAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADJ,CAPI,CAAR;AAWH;AACJ;;AAEDH,EAAAA,aAAa,CAACJ,YAAD,EAAeE,SAAf,EAA0B;AACnC,wBAAQ,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,OAAD;AAAS,MAAA,GAAG,EAAE3B,IAAd;AAAoB,MAAA,SAAS,EAAC,WAA9B;AAA0C,MAAA,EAAE,EAAEyB,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,CADI,eAIJ,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,OAAD;AAAS,MAAA,GAAG,EAAEzB,IAAd;AAAoB,MAAA,SAAS,EAAC,cAA9B;AAA6C,MAAA,EAAE,EAAE2B,SAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,CAJI,CAAR;AAQH;;AA/EoC","sourcesContent":["import React, { Component, Fragment } from 'react';\r\nimport { NavItem, NavLink } from 'reactstrap';\r\nimport { Link } from 'react-router-dom';\r\nimport authService from './AuthorizeService';\r\nimport { ApplicationPaths } from './ApiAuthorizationConstants';\r\n\r\nexport class LoginMenu extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isAuthenticated: false,\r\n            userName: null,\r\n            accountType: null\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this._subscription = authService.subscribe(() => this.populateState());\r\n        this.populateState();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        authService.unsubscribe(this._subscription);\r\n    }\r\n\r\n    async populateState() {\r\n        const [isAuthenticated, user, account] = await Promise.all([authService.isAuthenticated(), authService.getUser(), authService.getAccountType()])\r\n        this.setState({\r\n            isAuthenticated,\r\n            userName: user && user.name,\r\n            accountType: account\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { isAuthenticated, userName } = this.state;\r\n        if (!isAuthenticated) {\r\n            const registerPath = `${ApplicationPaths.Register}`;\r\n            const loginPath = `${ApplicationPaths.Login}`;\r\n            return this.anonymousView(registerPath, loginPath);\r\n        } else {\r\n            const profilePath = `${ApplicationPaths.Profile}`;\r\n            const logoutPath = { pathname: `${ApplicationPaths.LogOut}`, state: { local: true } };\r\n            return this.authenticatedView(userName, profilePath, logoutPath);\r\n        }\r\n    }\r\n\r\n    authenticatedView(userName, profilePath, logoutPath) {\r\n        if (!!this.state.accountType && this.state.accountType === 1) {\r\n            return (<Fragment>\r\n                <NavItem>\r\n                    <NavLink tag={Link} className=\"text-dark\" to=\"/Profil/Worker\">Profil Pracownika</NavLink>\r\n                </NavItem>\r\n                <NavItem>\r\n                    <NavLink tag={Link} className=\"text-dark\" to={profilePath}>Witaj {userName}</NavLink>\r\n                </NavItem>\r\n                <NavItem>\r\n                    <NavLink tag={Link} className=\"text-dark\" to={logoutPath}>Wyloguj</NavLink>\r\n                </NavItem>\r\n            </Fragment>);\r\n        } else {\r\n            return (<Fragment>\r\n                <NavItem>\r\n                    <NavLink tag={Link} className=\"text-dark\" to=\"/Profil/Customer\">Profil Klienta</NavLink>\r\n                </NavItem>\r\n                <NavItem>\r\n                    <NavLink tag={Link} className=\"text-dark\" to={profilePath}>Witaj {userName}</NavLink>\r\n                </NavItem>\r\n                <NavItem>\r\n                    <NavLink tag={Link} className=\"text-dark\" to={logoutPath}>Wyloguj</NavLink>\r\n                </NavItem>\r\n            </Fragment>);\r\n        }\r\n    }\r\n\r\n    anonymousView(registerPath, loginPath) {\r\n        return (<Fragment>\r\n            <NavItem>\r\n                <NavLink tag={Link} className=\"text-dark\" to={registerPath}>Zarejestruj sie</NavLink>\r\n            </NavItem>\r\n            <NavItem>\r\n                <NavLink tag={Link} className=\"text-primary\" to={loginPath}>Zaloguj</NavLink>\r\n            </NavItem>\r\n        </Fragment>);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}